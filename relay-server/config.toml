# SANKEY Copier Server Configuration

[server]
# Rust Server API host and port
host = "0.0.0.0"
port = 3000

[webui]
# Web UI host and port
host = "0.0.0.0"
port = 8080
# Web UI URL (for tray application)
url = "http://localhost:8080"

[database]
# SQLite database URL
url = "sqlite://sankey_copier.db?mode=rwc"

[zeromq]
# ZeroMQ port configuration (2-port architecture)
# Set to 0 for dynamic port assignment
receiver_port = 0         # Port for receiving messages from MT4/MT5 EAs (PULL socket)
sender_port = 0           # Unified port for sending all messages to EAs (PUB socket)
timeout_seconds = 30      # Connection timeout in seconds

[cors]
# CORS configuration for Web UI access
# WARNING: Setting disable=true allows ALL origins - use only in development!
disable = true  # Set to true to disable CORS restrictions (allows all origins)
# HTTPS origins are automatically generated from [webui] port setting:
#   - https://localhost:{webui_port}
#   - https://127.0.0.1:{webui_port}
# Additional custom origins can be specified below (e.g., for Vercel deployment, development ports)
# Single-line format required for installer config merge compatibility
additional_origins = ["https://copier.sankey.trade"]

[logging]
# Log file configuration
enabled = true                          # Enable file logging
directory = "logs"                      # Directory for log files (relative to executable or absolute path)
file_prefix = "sankey-copier-server"   # Prefix for log file names
rotation = "daily"                      # Rotation strategy: "daily", "hourly", or "never"
max_files = 3                           # Maximum number of log files to keep (0 = unlimited)
max_age_days = 3                        # Maximum age of log files in days (0 = unlimited)

[tls]
# TLS/HTTPS configuration for PNA (Private Network Access) compliance
# Certificate files are auto-generated and registered in Windows trusted root store on first run
cert_path = "certs/server.pem"          # Path to certificate file (relative to executable)
key_path = "certs/server-key.pem"       # Path to private key file (relative to executable)
validity_days = 3650                    # Certificate validity period in days (default: 10 years)

[victoria_logs]
# VictoriaLogs configuration for centralized log shipping
# Only 'enabled' can be toggled via Web-UI; other settings require direct config file edit
enabled = false
host = "http://localhost:9428"
batch_size = 100
flush_interval_secs = 5
source = "relay-server"
